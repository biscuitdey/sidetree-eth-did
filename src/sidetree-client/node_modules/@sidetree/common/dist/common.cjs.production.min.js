"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r=(e=require("base64url"))&&"object"==typeof e&&"default"in e?e.default:e,n=require("crypto");!function(e){e.CasNotReachable="cas_not_reachable",e.InvalidHash="content_hash_invalid",e.MaxSizeExceeded="content_exceeds_maximum_allowed_size",e.MaxSizeNotSpecified="content_max_size_not_specified",e.NotAFile="content_not_a_file",e.NotFound="content_not_found",e.Success="success"}(t||(t={}));var o,i=t;!function(e){e.Create="create",e.Update="update",e.Deactivate="deactivate",e.Recover="recover"}(o||(o={}));var a,s=o;!function(e){e.Auth="auth",e.General="general",e.KeyAgreement="agreement",e.AssertionMethod="assertion",e.CapabilityDelegation="delegation",e.CapabilityInvocation="invocation"}(a||(a={}));var c,_=a;!function(e){e.BadRequest="bad-request",e.NotFound="not-found",e.ServerError="server-error",e.Succeeded="succeeded"}(c||(c={}));var u,p=c;!function(e){e.Pending="pending",e.Processed="processed"}(u||(u={}));var l=u,d={AnchoredDataIncorrectFormat:"anchored_data_incorrect_format",AnchoredDataNumberOfOperationsGreaterThanMax:"anchored_data_number_of_operations_greater_than_max",AnchoredDataNumberOfOperationsNotPositiveInteger:"anchored_data_number_of_operations_not_positive_integer",AnchorFileCreatePropertyNotArray:"anchor_file_create_property_not_array",AnchorFileDecompressionFailure:"anchor_file_decompression_failed",AnchorFileHasUnknownProperty:"anchor_file_has_unknown_property",AnchorFileMapFileHashMissing:"anchor_file_map_file_hash_missing",AnchorFileMapFileHashNotString:"anchor_file_map_file_hash_not_string",AnchorFileMapFileHashUnsupported:"anchor_file_map_file_hash_unsupported",AnchorFileMissingOperationsProperty:"anchor_file_did_unique_suffixes_missing",AnchorFileMultipleOperationsForTheSameDid:"anchor_file_multiple_operations_for_the_same_did",AnchorFileNotJson:"anchor_file_not_json",AnchorFileOperationCountExceededPaidLimit:"anchor_file_operation_count_exceeded_paid_limit",AnchorFileRecoverPropertyNotArray:"anchor_file_recover_property_not_array",AnchorFileDeactivatePropertyNotArray:"anchor_file_deactivate_property_not_array",AnchorFileUnexpectedPropertyInOperations:"anchor_file_unexpected_property_in_operations",AnchorFileWriterLockIPropertyNotString:"anchor_file_writer_lock_id_property_not_string",BatchWriterAlreadyHasOperationForDid:"batch_writer_already_has_operation_for_did",CasFileHashNotValid:"cas_file_hash_not_valid",CasFileNotAFile:"cas_file_not_a file",CasFileNotFound:"cas_file_not_found",CasFileTooLarge:"cas_file_too_large",CasNotReachable:"cas_not_reachable",ChunkFileDeltaSizeExceedsLimit:"chunk_file_delta_size_exceeds_limit",ChunkFileDeltasNotArrayOfStrings:"chunk_file_deltas_not_array_of_string",ChunkFileDeltasPropertyNotArray:"chunk_file_deltas_property_not_array",ChunkFileUnexpectedProperty:"chunk_file_unexpected_property",CreateOperationMissingOrUnknownProperty:"create_operation_missing_or_unknown_property",CreateOperationSuffixDataMissingOrNotString:"create_operation_suffix_data_missing_or_not_string",CreateOperationSuffixDataMissingOrUnknownProperty:"create_operation_suffix_data_missing_or_unknown_property",CreateOperationTypeIncorrect:"create_operation_type_incorrect",DeltaMissingOrNotString:"delta_missting_or_not_string",DeltaMissingOrUnknownProperty:"delta_missing_or_unknown_property",DidIncorrectPrefix:"did_incorrect_prefix",DidInitialStateValueContainsMoreThanOneDot:"did_initial_state_value_contains_more_than_one_dot",DidInitialStateValueContainsNoDot:"did_initial_state_value_contains_no_dot",DidInitialStateValueDoesNotContainTwoParts:"did_initial_state_value_does_not_contain_two_parts",DidInvalidDidString:"did_invalid_did_string",DidLongFormNoInitialStateFound:"did_long_form_no_initial_state_found",DidLongFormOnlyInitialStateParameterIsAllowed:"did_long_form_only_initial_values_parameter_is_allowed",DidLongFormOnlyOneQueryParamAllowed:"did_long_form_only_one_query_param_allowed",DidNoUniqueSuffix:"did_no_unique_suffix",DidUniqueSuffixFromInitialStateMismatch:"did_unique_suffix_from_initial_state_mismatch",DocumentComposerDocumentMissing:"document_composer_document_missing",DocumentComposerIdNotString:"document_composer_id_not_string",DocumentComposerIdNotUsingBase64UrlCharacterSet:"document_composer_id_not_using_base_64_url_character_set",DocumentComposerIdTooLong:"document_composer_id_too_long",DocumentComposerInvalidSignature:"document_composer_invalid_signature",DocumentComposerPatchMissingOrUnknownAction:"document_composer_patch_missing_or_unknown_action",DocumentComposerPatchMissingOrUnknownProperty:"document_composer_patch_missing_or_unknown_property",DocumentComposerPatchPublicKeyIdNotString:"document_composer_patch_public_key_id_not_string",DocumentComposerPatchPublicKeyIdsNotArray:"document_composer_patch_public_keys_ids_not_array",DocumentComposerPatchServiceEndpointNotString:"document_composer_patch_service_endpoint_not_string",DocumentComposerPatchServiceEndpointsNotArray:"document_composer_patch_service_endpoints_not_array",DocumentComposerPatchServiceTypeMissingOrUnknown:"document_composer_patch_service_type_missing_or_unknown",DocumentComposerPublicKeyIdDuplicated:"document_composer_public_key_id_duplicated",DocumentComposerPublicKeyJwkMissingOrIncorrectType:"document_composer_public_key_jwk_missing_or_incorrect_type",DocumentComposerPublicKeyMissingOrUnknownProperty:"document_composer_public_key_missing_or_unknown_property",DocumentComposerPublicKeysNotArray:"document_composer_public_keys_not_array",DocumentComposerPublicKeyTypeMissingOrIncorrectType:"document_composer_public_key_type_missing_or_incorrect_type",DocumentComposerPublicKeyPurposeMissingOrUnknown:"document_composer_public_key_purpose_missing_or_unknown",DocumentComposerPublicKeyPurposeExceedsMaxLength:"document_composer_public_key_purpose_exceeds_max_length",DocumentComposerPublicKeyInvalidPurpose:"document_composer_public_key_invalid_purpose",DocumentComposerPatchServiceEndpointIdsNotArray:"document_composer_service_endpoint_ids_not_array",DocumentComposerPatchServiceEndpointServiceEndpointNotString:"document_composer_service_endpoint_service_endpoint_not_string",DocumentComposerPatchServiceEndpointServiceEndpointNotValidUrl:"document_composer_service_endpoint_service_endpoint_not_valid_url",DocumentComposerPatchServiceEndpointServiceEndpointTooLong:"document_composer_service_endpoint_service_endpoint_too_long",DocumentComposerPatchServiceEndpointTypeNotString:"document_composer_service_endpoint_type_not_string",DocumentComposerPatchServiceEndpointTypeTooLong:"document_composer_service_endpoint_type_too_long",DocumentComposerServiceEndpointMissingOrUnknownProperty:"document_composer_service_endpoint_missing_or_unknown_property",DocumentComposerServiceNotArray:"document_composer_service_not_array",DocumentComposerUnknownPropertyInDocument:"document_composer_unknown_property_in_document",DocumentComposerUpdateOperationDocumentPatchesNotArray:"document_composer_update_operation_document_patch_not_array",DocumentIncorretEncodedFormat:"document_incorrect_encoded_format",DocumentNotJson:"document_not_json",DocumentNotValidOriginalDocument:"document_not_valid_original_document",EncoderValidateBase64UrlStringInputNotBase64UrlString:"encoder_validate_base64url_string_input_not_base64url_string",EncoderValidateBase64UrlStringInputNotString:"encoder_validate_base64url_string_input_not_string",JwkHasUnknownProperty:"jwk_has_unknown_property",JwkMissingOrInvalidCrv:"jwk_missing_or_invalid_crv",JwkMissingOrInvalidKty:"jwk_missing_or_invalid_kty",JwkMissingOrInvalidTypeX:"jwk_missing_or_invalid_type_x",JwkMissingOrInvalidTypeY:"jwk_missing_or_invalid_type_y",JwkUndefined:"jwk_undefined",JwsCompactJwsInvalid:"jws_compact_jws_invalid",JwsCompactJwsNotString:"jws_compact_jws_not_string",JwsFailedSignatureValidation:"jws_failed_signature_validation",JwsPayloadNotBase64UrlString:"jws_payload_not_base64url_string",JwsProtectedHeaderMissingOrIncorrectAlg:"jws_protected_header_missing_or_incorrect_alg",JwsProtectedHeaderMissingOrUnknownProperty:"jws_protected_header_missing_or_unknown_property",JwsSignatureNotBase64UrlString:"jws_signature_not_base64url_string",MapFileChunkHasMissingOrUnknownProperty:"map_file_chunk_has_missing_or_unknown_property",MapFileChunksPropertyDoesNotHaveExactlyOneElement:"map_file_chunks_property_does_not_have_exactly_one_element",MapFileChunksPropertyMissingOrIncorrectType:"map_file_chunks_property_missing_or_incorrect_type",MapFileDecompressionFailure:"map_file_decompression_failure",MapFileHasUnknownProperty:"map_file_has_unknown_property",MapFileMultipleOperationsForTheSameDid:"map_file_multiple_operations_for_the_same_did",MapFileNotJson:"map_file_not_json",MapFileOperationsPropertyHasMissingOrUnknownProperty:"map_file_operations_property_has_missing_or_unknown_property",MapFileUpdateOperationsNotArray:"map_file_update_operations_not_array",MultihashNotLatestSupportedHashAlgorithm:"multihash_not_latest_supported_hash_algorithm",MultihashUnsupportedHashAlgorithm:"multihash_unsupported_hash_algorithm",OperationCreateInvalidDidDocument:"operation_create_invalid_did_document",OperationCountLessThanZero:"operation_count_less_than_zero",OperationCreatePayloadHasMissingOrInvalidNextRecoveryCommitment:"operation_create_payload_has_missing_or_invalid_next_recovery_commitment",OperationCreatePayloadHasMissingOrInvalidNextUpdateCommitment:"operation_create_payload_has_missing_or_invalid_next_update_commitment",OperationCreatePayloadMissingOrUnknownProperty:"operation_create_payload_missing_or_unknown_property",OperationDocumentPatchesMissing:"operation_document_patches_missing",OperationPayloadMissingOrIncorrectType:"operation_payload_missing_or_incorrect_type",OperationProcessorCreateOperationDoesNotHaveRevealValue:"operation_processor_create_operation_does_not_have_reveal_value",OperationProcessorUnknownOperationType:"operation_processor_unknown_operation_type",OperationTypeUnknownOrMissing:"operation_type_unknown_or_missing",QueueingMultipleOperationsPerDidNotAllowed:"queueing_multiple_operations_per_did_not_allowed",RecoverOperationMissingOrInvalidDidUniqueSuffix:"recover_operation_missing_or_invalid_did_unique_suffix",RecoverOperationMissingOrUnknownProperty:"recover_operation_missing_or_unknown_property",RecoverOperationSignedDataMissingOrUnknownProperty:"recover_operation_signed_data_missing_or_unknown_property",RecoverOperationTypeIncorrect:"recover_operation_type_incorrect",RequestHandlerDeltaExceedsMaximumSize:"request_handler_patch_data_exceeds_maximum_size",RequestHandlerUnknownOperationType:"request_handler_unknown_operation_type",DeactivateOperationMissingOrInvalidDidUniqueSuffix:"deactivate_operation_missing_or_invalid_did_unique_suffix",DeactivateOperationMissingOrUnknownProperty:"deactivate_operation_missing_or_unknown_property",DeactivateOperationSignedDataMissingOrUnknownProperty:"deactivate_operation_signed_data_missing_or_unknown_property",DeactivateOperationSignedDidUniqueSuffixMismatch:"deactivate_operation_signed_did_unique_suffix_mismatch",DeactivateOperationTypeIncorrect:"deactivate_operation_type_incorrect",TransactionFeePaidInvalid:"transaction_fee_paid_is_invalid",TransactionFeePaidLessThanNormalizedFee:"transaction_fee_paid_less_than_normalized_fee",TransactionProcessorPaidOperationCountExceedsLimit:"transaction_processor_paid_operation_count_exceeds_limit",TransactionsNotInSameBlock:"transactions_not_in_same_block",UpdateOperationMissingDidUniqueSuffix:"update_operation_missing_did_unique_suffix",UpdateOperationMissingOrUnknownProperty:"update_operation_missing_or_unknown_property",UpdateOperationSignedDataHasMissingOrUnknownProperty:"update_operation_signed_data_has_missing_or_unknown_property",UpdateOperationTypeIncorrect:"update_operation_type_incorrect",ValueTimeLockVerifierInvalidNumberOfOperations:"value_time_lock_verifierInvalid_number_of_operations",ValueTimeLockVerifierTransactionTimeOutsideLockRange:"value_time_lock_verifiertarget_transaction_time_outside_lock_range",ValueTimeLockVerifierTransactionWriterLockOwnerMismatch:"value_time_lock_verifiertransaction_owner_lock_writer_mismatch"};function h(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){h(i,n,o,a,s,"next",e)}function s(e){h(i,n,o,a,s,"throw",e)}a(void 0)}))}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,r){return(v=y()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&g(o,r.prototype),o}).apply(null,arguments)}function w(e){var t="function"==typeof Map?new Map:void 0;return(w=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)})(e)}var k=function(e){var t,r;function n(t,r){var o;return(o=e.call(this,r?t+": "+r:t)||this).code=t,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),(this instanceof n?this.constructor:void 0).prototype),o}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,g(t,r),n.createFromError=function(e,t){return new n(e,t?t.message:void 0)},n.stringify=function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))},n}(w(Error)),O={hashAlgorithmInMultihashCode:18,maxAnchorFileSizeInBytes:1e6,maxChunkFileSizeInBytes:2e7,maxDeltaSizeInBytes:1e3,maxMapFileSizeInBytes:1e6,maxNumberOfOperationsPerTransactionTime:6e5,maxNumberOfTransactionsPerTransactionTime:300,maxNumberOfOperationsForNoValueTimeLock:1e3,maxOperationsPerBatch:1e3,normalizedFeeToPerOperationFeeMultiplier:.01,valueTimeLockAmountMultiplier:600},x=function(){function e(){}return e.serialize=function(t){return""+t.numberOfOperations+e.delimiter+t.anchorFileHash},e.deserialize=function(t){var r=t.split(e.delimiter);if(2!==r.length)throw new k(d.AnchoredDataIncorrectFormat,"Input is not in correct format: "+t);var n=e.parsePositiveInteger(r[0]);if(n>O.maxOperationsPerBatch)throw new k(d.AnchoredDataNumberOfOperationsGreaterThanMax,"Number of operations "+n+" must be less than or equal to "+O.maxOperationsPerBatch);return{anchorFileHash:r[1],numberOfOperations:n}},e.parsePositiveInteger=function(e){if(!/^[1-9]\d*$/.test(e))throw new k(d.AnchoredDataNumberOfOperationsNotPositiveInteger,"Number of operations '"+e+"' is not a positive integer without leading zeros.");return Number(e)},e}();x.delimiter=".";var P,b=function(){function e(){}return e.encode=function(e){return r.encode(e)},e.decodeAsBuffer=function(t){return e.validateBase64UrlString(t),r.toBuffer(t)},e.decodeAsString=function(t){return e.decodeBase64UrlAsString(t)},e.decodeBase64UrlAsString=function(t){return e.validateBase64UrlString(t),r.decode(t)},e.validateBase64UrlString=function(t){if("string"!=typeof t)throw new k(d.EncoderValidateBase64UrlStringInputNotString,"Input '"+t+"' not a string.");if(!e.isBase64UrlString(t))throw new k(d.EncoderValidateBase64UrlStringInputNotBase64UrlString,"Input '"+t+"' not a Base64URL string.")},e.isBase64UrlString=function(e){return/^[A-Za-z0-9_-]+$/.test(e)},e}(),S=require("canonicalize"),N=function(){function e(){}return e.canonicalizeAsBuffer=function(e){var t=S(e);return Buffer.from(t)},e}(),D=require("multihashes"),M=function(){function e(){}return e.hash=function(e,t){var r;switch(void 0===t&&(t=O.hashAlgorithmInMultihashCode),t){case 18:r=n.createHash("sha256").update(e).digest();break;default:throw new k(d.MultihashUnsupportedHashAlgorithm)}return D.encode(r,D.codes[t])},e.canonicalizeThenHashThenEncode=function(t){var r=N.canonicalizeAsBuffer(t);return e.hashThenEncode(r,O.hashAlgorithmInMultihashCode)},e.hashThenEncode=function(t,r){var n=e.hash(t,r);return b.encode(n)},e.getHashAlgorithmCode=function(e){var t=D.decode(e);if(18!==t.code)throw new k(d.MultihashUnsupportedHashAlgorithm);return t.code},e.verifyHashComputedUsingLatestSupportedAlgorithm=function(t){if(!e.isComputedUsingHashAlgorithm(t,18))throw new k(d.MultihashNotLatestSupportedHashAlgorithm)},e.isComputedUsingHashAlgorithm=function(e,t){try{return D.decode(e).code===t}catch(e){return!1}},e.isValidHash=function(t,r){if(void 0===t)return!1;try{var n=b.decodeAsBuffer(t);return e.verify(n,r)}catch(e){return console.log(e),!1}},e.canonicalizeAndVerify=function(t,r){if(void 0===t)return!1;try{var n=N.canonicalizeAsBuffer(t);return e.verify(n,r)}catch(e){return console.log(e),!1}},e.verify=function(t,r){try{var n=b.decodeAsBuffer(r),o=e.getHashAlgorithmCode(n),i=e.hash(t,o);return 0===Buffer.compare(i,n)}catch(e){return console.log(e),!1}},e}(),C=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=Object.create((t&&t.prototype instanceof p?t:p).prototype),i=new x(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=_(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function l(){}function d(){}var h={};h[o]=function(){return this};var m=Object.getPrototypeOf,f=m&&m(m(P([])));f&&f!==t&&r.call(f,o)&&(h=f);var g=d.prototype=p.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var n;this._invoke=function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,s){var c=_(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=_(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:b}}function b(){return{value:void 0,done:!0}}return l.prototype=g.constructor=d,d.constructor=l,l.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(v.prototype),v.prototype[i]=function(){return this},e.AsyncIterator=v,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new v(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(P={exports:{}}),P.exports),F=function(){function e(){}return e.readAll=function(){var e=m(C.mark((function e(t){var r,n;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Buffer.alloc(0),t.on("readable",(function(){for(var e=t.read();null!==e;)r=Buffer.concat([r,e]),e=t.read()})),n=new Promise((function(e,r){t.on("end",e),t.on("error",r)})),e.next=5,n;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),A=function(){function e(){}return e.binarySearch=function(e,t,r){for(var n=0,o=e.length-1,i=0;n<=o;){var a=r(e[i=Math.floor((n+o)/2)],t);if(a>0)o=i-1;else{if(!(a<0))return i;n=i+1}}},e}();exports.AbstractVersionMetadata=function(){},exports.AnchoredDataSerializer=x,exports.CoreErrorCode={BlockchainGetFeeResponseNotOk:"blockchain_get_fee_response_not_ok",BlockchainGetLatestTimeResponseNotOk:"blockchain_get_latest_time_response_not_ok",BlockchainGetLockResponseNotOk:"blockchain_get_lock_response_not_ok",BlockchainGetWriterLockResponseNotOk:"blockchain_get_writer_lock_response_not_ok",BlockchainReadInvalidArguments:"blockchain_read_invalid_arguments",BlockchainReadResponseNotOk:"blockchain_read_response_not_ok",BlockchainWriteResponseNotOk:"blockchain_write_response_not_ok",VersionManagerBatchWriterNotFound:"version_manager_batch_writer_not_found",VersionManagerDocumentComposerNotFound:"version_manager_document_composer_not_found",VersionManagerOperationProcessorNotFound:"version_manager_operation_processor_not_found",VersionManagerRequestHandlerNotFound:"version_manager_request_handler_not_found",VersionManagerTransactionProcessorNotFound:"version_manager_transaction_processor_not_found",VersionManagerTransactionSelectorNotFound:"version_manager_transaction_selector_not_found",VersionManagerVersionStringNotFound:"version_manager_version_string_not_found",VersionManagerVersionMetadataIncorrectType:"version_manager_version_metadata_incorrect_type"},exports.Encoder=b,exports.ErrorCode=d,exports.FetchResultCode=i,exports.JsonCanonicalizer=N,exports.Multihash=M,exports.OperationType=s,exports.PublicKeyPurpose=_,exports.ReadableStream=F,exports.ResponseStatus=p,exports.SharedErrorCode={BlockchainTimeOutOfRange:"blockchain_time_out_of_range",InvalidTransactionNumberOrTimeHash:"invalid_transaction_number_or_time_hash",NotEnoughBalanceForWrite:"not_enough_balace_for_write",SpendingCapPerPeriodReached:"spending_cap_per_period_reached",ValueTimeLockNotFound:"value_time_lock_not_found"},exports.SidetreeError=k,exports.SortedArray=A,exports.TransactionProcessingStatus=l,exports.protocolParameters=O;
//# sourceMappingURL=common.cjs.production.min.js.map
