{"version":3,"file":"common.cjs.production.min.js","sources":["../src/enums/FetchResultCode.ts","../src/enums/OperationType.ts","../src/enums/PublicKeyPurpose.ts","../src/enums/ResponseStatus.ts","../src/enums/TransactionProcessingStatus.ts","../src/errors/ErrorCode.ts","../src/errors/SidetreeError.ts","../src/util/parameters.ts","../src/util/AnchoredDataSerializer.ts","../src/util/Encoder.ts","../src/util/JsonCanonicalizer.ts","../src/util/Multihash.ts","../node_modules/regenerator-runtime/runtime.js","../src/util/ReadableStream.ts","../src/util/SortedArray.ts","../src/errors/CoreErrorCode.ts","../src/errors/SharedErrorCode.ts"],"sourcesContent":["/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Return code for a content fetch.\n */\nenum FetchResultCode {\n  CasNotReachable = 'cas_not_reachable',\n  InvalidHash = 'content_hash_invalid',\n  MaxSizeExceeded = 'content_exceeds_maximum_allowed_size',\n  MaxSizeNotSpecified = 'content_max_size_not_specified',\n  NotAFile = 'content_not_a_file',\n  NotFound = 'content_not_found',\n  Success = 'success',\n}\n\nexport default FetchResultCode;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Sidetree operation types.\n */\nenum OperationType {\n  Create = 'create',\n  Update = 'update',\n  Deactivate = 'deactivate',\n  Recover = 'recover',\n}\n\nexport default OperationType;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Sidetree public key purpose.\n */\nenum PublicKeyPurpose {\n  Auth = 'auth',\n  General = 'general',\n  KeyAgreement = 'agreement',\n  AssertionMethod = 'assertion',\n  CapabilityDelegation = 'delegation',\n  CapabilityInvocation = 'invocation',\n}\n\nexport default PublicKeyPurpose;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Possible Sidetree response status.\n */\nenum ResponseStatus {\n  BadRequest = 'bad-request',\n  NotFound = 'not-found',\n  ServerError = 'server-error',\n  Succeeded = 'succeeded',\n}\n\nexport default ResponseStatus;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The state of a transaction that is being processed.\n */\nenum TransactionProcessingStatus {\n  Pending = 'pending',\n  Processed = 'processed',\n}\n\nexport default TransactionProcessingStatus;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Error codes used ONLY by this version of the protocol.\n */\nexport default {\n  AnchoredDataIncorrectFormat: 'anchored_data_incorrect_format',\n  AnchoredDataNumberOfOperationsGreaterThanMax:\n    'anchored_data_number_of_operations_greater_than_max',\n  AnchoredDataNumberOfOperationsNotPositiveInteger:\n    'anchored_data_number_of_operations_not_positive_integer',\n  AnchorFileCreatePropertyNotArray: 'anchor_file_create_property_not_array',\n  AnchorFileDecompressionFailure: 'anchor_file_decompression_failed',\n  AnchorFileHasUnknownProperty: 'anchor_file_has_unknown_property',\n  AnchorFileMapFileHashMissing: 'anchor_file_map_file_hash_missing',\n  AnchorFileMapFileHashNotString: 'anchor_file_map_file_hash_not_string',\n  AnchorFileMapFileHashUnsupported: 'anchor_file_map_file_hash_unsupported',\n  AnchorFileMissingOperationsProperty:\n    'anchor_file_did_unique_suffixes_missing',\n  AnchorFileMultipleOperationsForTheSameDid:\n    'anchor_file_multiple_operations_for_the_same_did',\n  AnchorFileNotJson: 'anchor_file_not_json',\n  AnchorFileOperationCountExceededPaidLimit:\n    'anchor_file_operation_count_exceeded_paid_limit',\n  AnchorFileRecoverPropertyNotArray: 'anchor_file_recover_property_not_array',\n  AnchorFileDeactivatePropertyNotArray:\n    'anchor_file_deactivate_property_not_array',\n  AnchorFileUnexpectedPropertyInOperations:\n    'anchor_file_unexpected_property_in_operations',\n  AnchorFileWriterLockIPropertyNotString:\n    'anchor_file_writer_lock_id_property_not_string',\n  BatchWriterAlreadyHasOperationForDid:\n    'batch_writer_already_has_operation_for_did',\n  CasFileHashNotValid: 'cas_file_hash_not_valid',\n  CasFileNotAFile: 'cas_file_not_a file',\n  CasFileNotFound: 'cas_file_not_found',\n  CasFileTooLarge: 'cas_file_too_large',\n  CasNotReachable: 'cas_not_reachable',\n  ChunkFileDeltaSizeExceedsLimit: 'chunk_file_delta_size_exceeds_limit',\n  ChunkFileDeltasNotArrayOfStrings: 'chunk_file_deltas_not_array_of_string',\n  ChunkFileDeltasPropertyNotArray: 'chunk_file_deltas_property_not_array',\n  ChunkFileUnexpectedProperty: 'chunk_file_unexpected_property',\n  CreateOperationMissingOrUnknownProperty:\n    'create_operation_missing_or_unknown_property',\n  CreateOperationSuffixDataMissingOrNotString:\n    'create_operation_suffix_data_missing_or_not_string',\n  CreateOperationSuffixDataMissingOrUnknownProperty:\n    'create_operation_suffix_data_missing_or_unknown_property',\n  CreateOperationTypeIncorrect: 'create_operation_type_incorrect',\n  DeltaMissingOrNotString: 'delta_missting_or_not_string',\n  DeltaMissingOrUnknownProperty: 'delta_missing_or_unknown_property',\n  DidIncorrectPrefix: 'did_incorrect_prefix',\n  DidInitialStateValueContainsMoreThanOneDot:\n    'did_initial_state_value_contains_more_than_one_dot',\n  DidInitialStateValueContainsNoDot: 'did_initial_state_value_contains_no_dot',\n  DidInitialStateValueDoesNotContainTwoParts:\n    'did_initial_state_value_does_not_contain_two_parts',\n  DidInvalidDidString: 'did_invalid_did_string',\n  DidLongFormNoInitialStateFound: 'did_long_form_no_initial_state_found',\n  DidLongFormOnlyInitialStateParameterIsAllowed:\n    'did_long_form_only_initial_values_parameter_is_allowed',\n  DidLongFormOnlyOneQueryParamAllowed:\n    'did_long_form_only_one_query_param_allowed',\n  DidNoUniqueSuffix: 'did_no_unique_suffix',\n  DidUniqueSuffixFromInitialStateMismatch:\n    'did_unique_suffix_from_initial_state_mismatch',\n  DocumentComposerDocumentMissing: 'document_composer_document_missing',\n  DocumentComposerIdNotString: 'document_composer_id_not_string',\n  DocumentComposerIdNotUsingBase64UrlCharacterSet:\n    'document_composer_id_not_using_base_64_url_character_set',\n  DocumentComposerIdTooLong: 'document_composer_id_too_long',\n  DocumentComposerInvalidSignature: 'document_composer_invalid_signature',\n  DocumentComposerPatchMissingOrUnknownAction:\n    'document_composer_patch_missing_or_unknown_action',\n  DocumentComposerPatchMissingOrUnknownProperty:\n    'document_composer_patch_missing_or_unknown_property',\n  DocumentComposerPatchPublicKeyIdNotString:\n    'document_composer_patch_public_key_id_not_string',\n  DocumentComposerPatchPublicKeyIdsNotArray:\n    'document_composer_patch_public_keys_ids_not_array',\n  DocumentComposerPatchServiceEndpointNotString:\n    'document_composer_patch_service_endpoint_not_string',\n  DocumentComposerPatchServiceEndpointsNotArray:\n    'document_composer_patch_service_endpoints_not_array',\n  DocumentComposerPatchServiceTypeMissingOrUnknown:\n    'document_composer_patch_service_type_missing_or_unknown',\n  DocumentComposerPublicKeyIdDuplicated:\n    'document_composer_public_key_id_duplicated',\n  DocumentComposerPublicKeyJwkMissingOrIncorrectType:\n    'document_composer_public_key_jwk_missing_or_incorrect_type',\n  DocumentComposerPublicKeyMissingOrUnknownProperty:\n    'document_composer_public_key_missing_or_unknown_property',\n  DocumentComposerPublicKeysNotArray: 'document_composer_public_keys_not_array',\n  DocumentComposerPublicKeyTypeMissingOrIncorrectType:\n    'document_composer_public_key_type_missing_or_incorrect_type',\n  DocumentComposerPublicKeyPurposeMissingOrUnknown:\n    'document_composer_public_key_purpose_missing_or_unknown',\n  DocumentComposerPublicKeyPurposeExceedsMaxLength:\n    'document_composer_public_key_purpose_exceeds_max_length',\n  DocumentComposerPublicKeyInvalidPurpose:\n    'document_composer_public_key_invalid_purpose',\n  DocumentComposerPatchServiceEndpointIdsNotArray:\n    'document_composer_service_endpoint_ids_not_array',\n  DocumentComposerPatchServiceEndpointServiceEndpointNotString:\n    'document_composer_service_endpoint_service_endpoint_not_string',\n  DocumentComposerPatchServiceEndpointServiceEndpointNotValidUrl:\n    'document_composer_service_endpoint_service_endpoint_not_valid_url',\n  DocumentComposerPatchServiceEndpointServiceEndpointTooLong:\n    'document_composer_service_endpoint_service_endpoint_too_long',\n  DocumentComposerPatchServiceEndpointTypeNotString:\n    'document_composer_service_endpoint_type_not_string',\n  DocumentComposerPatchServiceEndpointTypeTooLong:\n    'document_composer_service_endpoint_type_too_long',\n  DocumentComposerServiceEndpointMissingOrUnknownProperty:\n    'document_composer_service_endpoint_missing_or_unknown_property',\n  DocumentComposerServiceNotArray: 'document_composer_service_not_array',\n  DocumentComposerUnknownPropertyInDocument:\n    'document_composer_unknown_property_in_document',\n  DocumentComposerUpdateOperationDocumentPatchesNotArray:\n    'document_composer_update_operation_document_patch_not_array',\n  DocumentIncorretEncodedFormat: 'document_incorrect_encoded_format',\n  DocumentNotJson: 'document_not_json',\n  DocumentNotValidOriginalDocument: 'document_not_valid_original_document',\n  EncoderValidateBase64UrlStringInputNotBase64UrlString:\n    'encoder_validate_base64url_string_input_not_base64url_string',\n  EncoderValidateBase64UrlStringInputNotString:\n    'encoder_validate_base64url_string_input_not_string',\n  JwkHasUnknownProperty: 'jwk_has_unknown_property',\n  JwkMissingOrInvalidCrv: 'jwk_missing_or_invalid_crv',\n  JwkMissingOrInvalidKty: 'jwk_missing_or_invalid_kty',\n  JwkMissingOrInvalidTypeX: 'jwk_missing_or_invalid_type_x',\n  JwkMissingOrInvalidTypeY: 'jwk_missing_or_invalid_type_y',\n  JwkUndefined: 'jwk_undefined',\n  JwsCompactJwsInvalid: 'jws_compact_jws_invalid',\n  JwsCompactJwsNotString: 'jws_compact_jws_not_string',\n  JwsFailedSignatureValidation: 'jws_failed_signature_validation',\n  JwsPayloadNotBase64UrlString: 'jws_payload_not_base64url_string',\n  JwsProtectedHeaderMissingOrIncorrectAlg:\n    'jws_protected_header_missing_or_incorrect_alg',\n  JwsProtectedHeaderMissingOrUnknownProperty:\n    'jws_protected_header_missing_or_unknown_property',\n  JwsSignatureNotBase64UrlString: 'jws_signature_not_base64url_string',\n  MapFileChunkHasMissingOrUnknownProperty:\n    'map_file_chunk_has_missing_or_unknown_property',\n  MapFileChunksPropertyDoesNotHaveExactlyOneElement:\n    'map_file_chunks_property_does_not_have_exactly_one_element',\n  MapFileChunksPropertyMissingOrIncorrectType:\n    'map_file_chunks_property_missing_or_incorrect_type',\n  MapFileDecompressionFailure: 'map_file_decompression_failure',\n  MapFileHasUnknownProperty: 'map_file_has_unknown_property',\n  MapFileMultipleOperationsForTheSameDid:\n    'map_file_multiple_operations_for_the_same_did',\n  MapFileNotJson: 'map_file_not_json',\n  MapFileOperationsPropertyHasMissingOrUnknownProperty:\n    'map_file_operations_property_has_missing_or_unknown_property',\n  MapFileUpdateOperationsNotArray: 'map_file_update_operations_not_array',\n  MultihashNotLatestSupportedHashAlgorithm:\n    'multihash_not_latest_supported_hash_algorithm',\n  MultihashUnsupportedHashAlgorithm: 'multihash_unsupported_hash_algorithm',\n  OperationCreateInvalidDidDocument: 'operation_create_invalid_did_document',\n  OperationCountLessThanZero: 'operation_count_less_than_zero',\n  OperationCreatePayloadHasMissingOrInvalidNextRecoveryCommitment:\n    'operation_create_payload_has_missing_or_invalid_next_recovery_commitment',\n  OperationCreatePayloadHasMissingOrInvalidNextUpdateCommitment:\n    'operation_create_payload_has_missing_or_invalid_next_update_commitment',\n  OperationCreatePayloadMissingOrUnknownProperty:\n    'operation_create_payload_missing_or_unknown_property',\n  OperationDocumentPatchesMissing: 'operation_document_patches_missing',\n  OperationPayloadMissingOrIncorrectType:\n    'operation_payload_missing_or_incorrect_type',\n  OperationProcessorCreateOperationDoesNotHaveRevealValue:\n    'operation_processor_create_operation_does_not_have_reveal_value',\n  OperationProcessorUnknownOperationType:\n    'operation_processor_unknown_operation_type',\n  OperationTypeUnknownOrMissing: 'operation_type_unknown_or_missing',\n  QueueingMultipleOperationsPerDidNotAllowed:\n    'queueing_multiple_operations_per_did_not_allowed',\n  RecoverOperationMissingOrInvalidDidUniqueSuffix:\n    'recover_operation_missing_or_invalid_did_unique_suffix',\n  RecoverOperationMissingOrUnknownProperty:\n    'recover_operation_missing_or_unknown_property',\n  RecoverOperationSignedDataMissingOrUnknownProperty:\n    'recover_operation_signed_data_missing_or_unknown_property',\n  RecoverOperationTypeIncorrect: 'recover_operation_type_incorrect',\n  RequestHandlerDeltaExceedsMaximumSize:\n    'request_handler_patch_data_exceeds_maximum_size',\n  RequestHandlerUnknownOperationType: 'request_handler_unknown_operation_type',\n  DeactivateOperationMissingOrInvalidDidUniqueSuffix:\n    'deactivate_operation_missing_or_invalid_did_unique_suffix',\n  DeactivateOperationMissingOrUnknownProperty:\n    'deactivate_operation_missing_or_unknown_property',\n  DeactivateOperationSignedDataMissingOrUnknownProperty:\n    'deactivate_operation_signed_data_missing_or_unknown_property',\n  DeactivateOperationSignedDidUniqueSuffixMismatch:\n    'deactivate_operation_signed_did_unique_suffix_mismatch',\n  DeactivateOperationTypeIncorrect: 'deactivate_operation_type_incorrect',\n  TransactionFeePaidInvalid: 'transaction_fee_paid_is_invalid',\n  TransactionFeePaidLessThanNormalizedFee:\n    'transaction_fee_paid_less_than_normalized_fee',\n  TransactionProcessorPaidOperationCountExceedsLimit:\n    'transaction_processor_paid_operation_count_exceeds_limit',\n  TransactionsNotInSameBlock: 'transactions_not_in_same_block',\n  UpdateOperationMissingDidUniqueSuffix:\n    'update_operation_missing_did_unique_suffix',\n  UpdateOperationMissingOrUnknownProperty:\n    'update_operation_missing_or_unknown_property',\n  UpdateOperationSignedDataHasMissingOrUnknownProperty:\n    'update_operation_signed_data_has_missing_or_unknown_property',\n  UpdateOperationTypeIncorrect: 'update_operation_type_incorrect',\n  ValueTimeLockVerifierInvalidNumberOfOperations:\n    'value_time_lock_verifierInvalid_number_of_operations',\n  ValueTimeLockVerifierTransactionTimeOutsideLockRange:\n    'value_time_lock_verifiertarget_transaction_time_outside_lock_range',\n  ValueTimeLockVerifierTransactionWriterLockOwnerMismatch:\n    'value_time_lock_verifiertransaction_owner_lock_writer_mismatch',\n};\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Standardized error class for throwing generic errors internal to this project.\n * NOTE: Not to be confused with RequestError which is used as a response to external requests.\n */\nexport default class SidetreeError extends Error {\n  constructor(public code: string, message?: string) {\n    super(message ? `${code}: ${message}` : code);\n\n    // NOTE: Extending 'Error' breaks prototype chain since TypeScript 2.1.\n    // The following line restores prototype chain.\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n\n  /**\n   * Returns a new SidetreeError object using the inputs.\n   *\n   * @param code The error code.\n   * @param err The error exception thrown.\n   */\n  public static createFromError(code: string, err: Error): SidetreeError {\n    return new SidetreeError(code, err ? err.message : undefined);\n  }\n\n  /**\n   * Converts the given `Error` into a string.\n   */\n  public static stringify(error: Error) {\n    return JSON.stringify(error, Object.getOwnPropertyNames(error));\n  }\n}\n","﻿/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ProtocolParameters from '../models/ProtocolParameters';\n\n/**\n * Defines the list of protocol parameters, intended ONLY to be used within each version of Sidetree.\n */\nconst protocolParameters: ProtocolParameters = {\n  hashAlgorithmInMultihashCode: 18,\n  maxAnchorFileSizeInBytes: 1000000,\n  maxChunkFileSizeInBytes: 20000000,\n  maxDeltaSizeInBytes: 1000,\n  maxMapFileSizeInBytes: 1000000,\n  maxNumberOfOperationsPerTransactionTime: 600000,\n  maxNumberOfTransactionsPerTransactionTime: 300,\n  // If you are not using value lock, maxNumberOfOperationsForNoValueTimeLock\n  // maxOperationsPerBatch should be the same\n  maxNumberOfOperationsForNoValueTimeLock: 1000,\n  maxOperationsPerBatch: 1000,\n  normalizedFeeToPerOperationFeeMultiplier: 0.01,\n  valueTimeLockAmountMultiplier: 600,\n};\nexport default protocolParameters;\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnchoredData } from '../models';\nimport { ErrorCode, SidetreeError } from '../errors';\nimport protocolParameters from './parameters';\n\n/**\n * Encapsulates functionality to serialize/deserialize data that read/write to\n * the blockchain.\n */\nexport default class AnchoredDataSerializer {\n  /** Delimiter between logical parts in anchor string. */\n  public static readonly delimiter = '.';\n\n  /**\n   * Converts the given inputs to the string that is to be written to the blockchain.\n   *\n   * @param dataToBeAnchored The data to serialize.\n   */\n  public static serialize(dataToBeAnchored: AnchoredData): string {\n    // Concatenate the inputs w/ the delimiter and return\n    const anchorString = `${dataToBeAnchored.numberOfOperations}${AnchoredDataSerializer.delimiter}${dataToBeAnchored.anchorFileHash}`;\n    return anchorString;\n  }\n\n  /**\n   * Deserializes the given string that is read from the blockchain into data.\n   *\n   * @param serializedData The data to be deserialized.\n   */\n  public static deserialize(serializedData: string): AnchoredData {\n    const splitData = serializedData.split(AnchoredDataSerializer.delimiter);\n\n    if (splitData.length !== 2) {\n      throw new SidetreeError(\n        ErrorCode.AnchoredDataIncorrectFormat,\n        `Input is not in correct format: ${serializedData}`\n      );\n    }\n\n    const numberOfOperations = AnchoredDataSerializer.parsePositiveInteger(\n      splitData[0]\n    );\n\n    if (numberOfOperations > protocolParameters.maxOperationsPerBatch) {\n      throw new SidetreeError(\n        ErrorCode.AnchoredDataNumberOfOperationsGreaterThanMax,\n        `Number of operations ${numberOfOperations} must be less than or equal to ${protocolParameters.maxOperationsPerBatch}`\n      );\n    }\n\n    return {\n      anchorFileHash: splitData[1],\n      numberOfOperations: numberOfOperations,\n    };\n  }\n\n  private static parsePositiveInteger(input: string): number {\n    // NOTE:\n    // /<expression>/ denotes regex.\n    // ^ denotes beginning of string.\n    // $ denotes end of string.\n    // [1-9] denotes leading '0' not allowed.\n    // \\d* denotes followed by 0 or more decimal digits.\n    const isPositiveInteger = /^[1-9]\\d*$/.test(input);\n\n    if (!isPositiveInteger) {\n      throw new SidetreeError(\n        ErrorCode.AnchoredDataNumberOfOperationsNotPositiveInteger,\n        `Number of operations '${input}' is not a positive integer without leading zeros.`\n      );\n    }\n\n    return Number(input);\n  }\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport base64url from 'base64url';\nimport ErrorCode from '../errors/ErrorCode';\nimport SidetreeError from '../errors/SidetreeError';\n\n/**\n * Class that encodes binary blobs into strings.\n * Note that the encode/decode methods may change underlying encoding scheme.\n */\nexport default class Encoder {\n  /**\n   * Encodes given Buffer into a Base64URL string.\n   */\n  public static encode(content: Buffer | string): string {\n    const encodedContent = base64url.encode(content);\n    return encodedContent;\n  }\n\n  /**\n   * Decodes the given Base64URL string into a Buffer.\n   */\n  public static decodeAsBuffer(encodedContent: string): Buffer {\n    Encoder.validateBase64UrlString(encodedContent);\n\n    const content = base64url.toBuffer(encodedContent);\n    return content;\n  }\n\n  /**\n   * Decodes the given input into the original string.\n   */\n  public static decodeAsString(encodedContent: string): string {\n    return Encoder.decodeBase64UrlAsString(encodedContent);\n  }\n\n  /**\n   * Decodes the given Base64URL string into the original string.\n   */\n  public static decodeBase64UrlAsString(input: string): string {\n    Encoder.validateBase64UrlString(input);\n\n    const content = base64url.decode(input);\n    return content;\n  }\n\n  /**\n   * Validates if the given input is a Base64URL string.\n   * undefined is considered not a valid Base64URL string.\n   * NOTE: input is `any` type to handle cases when caller passes input directly from JSON.parse() as `any`.\n   * @throws SidetreeError if input is not a Base64URL string.\n   */\n  private static validateBase64UrlString(input: any) {\n    if (typeof input !== 'string') {\n      throw new SidetreeError(\n        ErrorCode.EncoderValidateBase64UrlStringInputNotString,\n        `Input '${input}' not a string.`\n      );\n    }\n\n    const isBase64UrlString = Encoder.isBase64UrlString(input);\n    if (!isBase64UrlString) {\n      throw new SidetreeError(\n        ErrorCode.EncoderValidateBase64UrlStringInputNotBase64UrlString,\n        `Input '${input}' not a Base64URL string.`\n      );\n    }\n  }\n\n  /**\n   * Tests if the given string is a Base64URL string.\n   */\n  public static isBase64UrlString(input: string): boolean {\n    // NOTE:\n    // '/<expression>/ denotes regex.\n    // ^ denotes beginning of string.\n    // $ denotes end of string.\n    // + denotes one or more characters.\n    const isBase64UrlString = /^[A-Za-z0-9_-]+$/.test(input);\n    return isBase64UrlString;\n  }\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst canonicalize = require('canonicalize');\n\n/**\n * Class containing reusable JSON canonicalization operations using JSON Canonicalization Scheme (JCS).\n */\nexport default class JsonCanonicalizer {\n  /**\n   * Canonicalizes the given content as a UTF8 buffer.\n   */\n  public static canonicalizeAsBuffer(content: object): Buffer {\n    const canonicalizedString: string = canonicalize(content);\n    const contentBuffer = Buffer.from(canonicalizedString);\n    return contentBuffer;\n  }\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as crypto from 'crypto';\nimport Encoder from './Encoder';\nimport ErrorCode from '../errors/ErrorCode';\nimport JsonCanonicalizer from './JsonCanonicalizer';\nimport ProtocolParameters from './parameters';\nimport SidetreeError from '../errors/SidetreeError';\n\nconst multihashes = require('multihashes');\n\n/**\n * Class that performs hashing operations using the multihash format.\n */\nexport default class Multihash {\n  /**\n   * Hashes the content using the hashing algorithm specified.\n   * @param hashAlgorithmInMultihashCode The hashing algorithm to use. If not given, latest supported hashing algorithm will be used.\n   */\n  public static hash(\n    content: Buffer,\n    hashAlgorithmInMultihashCode?: number\n  ): Buffer {\n    if (hashAlgorithmInMultihashCode === undefined) {\n      hashAlgorithmInMultihashCode =\n        ProtocolParameters.hashAlgorithmInMultihashCode;\n    }\n\n    let hash;\n    switch (hashAlgorithmInMultihashCode) {\n      case 18: // SHA256\n        hash = crypto\n          .createHash('sha256') // SHA256\n          .update(content)\n          .digest();\n        break;\n      default:\n        throw new SidetreeError(ErrorCode.MultihashUnsupportedHashAlgorithm);\n    }\n\n    const hashAlgorithmName = multihashes.codes[hashAlgorithmInMultihashCode];\n    const multihash = multihashes.encode(hash, hashAlgorithmName);\n\n    return multihash;\n  }\n\n  /**\n   * Canonicalize the given content, then multihashes the result using the lastest supported hash algorithm, then encodes the multihash.\n   * Mainly used for testing purposes.\n   */\n  public static canonicalizeThenHashThenEncode(content: object) {\n    const contentBuffer = JsonCanonicalizer.canonicalizeAsBuffer(content);\n    const multihashEncodedString = Multihash.hashThenEncode(\n      contentBuffer,\n      ProtocolParameters.hashAlgorithmInMultihashCode\n    );\n    return multihashEncodedString;\n  }\n\n  /**\n   * Hashes the content using the hashing algorithm specified then codes the multihash buffer.\n   * @param hashAlgorithmInMultihashCode The hashing algorithm to use.\n   */\n  public static hashThenEncode(\n    content: Buffer,\n    hashAlgorithmInMultihashCode: number\n  ): string {\n    const multihashBuffer = Multihash.hash(\n      content,\n      hashAlgorithmInMultihashCode\n    );\n    const multihashEncodedString = Encoder.encode(multihashBuffer);\n    return multihashEncodedString;\n  }\n\n  /**\n   * Given a multihash, returns the code of the hash algorithm used.\n   * @throws `SidetreeError` if hash algorithm used for the given multihash is unsupported.\n   */\n  public static getHashAlgorithmCode(multihashBuffer: Buffer): number {\n    const multihash = multihashes.decode(multihashBuffer);\n\n    // Hash algorithm must be SHA-256.\n    if (multihash.code !== 18) {\n      throw new SidetreeError(ErrorCode.MultihashUnsupportedHashAlgorithm);\n    }\n\n    return multihash.code;\n  }\n\n  /**\n   * Verifies that the given hash is a multihash computed using the latest supported hash algorithm known to this version of code.\n   * @throws `SidetreeError` if the given hash is not a multihash computed using the latest supported hash algorithm.\n   */\n  public static verifyHashComputedUsingLatestSupportedAlgorithm(hash: Buffer) {\n    const latestSupportedHashAlgorithmCode = 18;\n    const isLatestSupportedHashFormat = Multihash.isComputedUsingHashAlgorithm(\n      hash,\n      latestSupportedHashAlgorithmCode\n    ); // SHA-256.\n\n    if (!isLatestSupportedHashFormat) {\n      throw new SidetreeError(\n        ErrorCode.MultihashNotLatestSupportedHashAlgorithm\n      );\n    }\n  }\n\n  /**\n   * Checks if the given hash is a multihash with the expected hashing algorithm.\n   */\n  public static isComputedUsingHashAlgorithm(\n    hash: Buffer,\n    expectedHashAlgorithmInMultihashCode: number\n  ): boolean {\n    try {\n      const multihash = multihashes.decode(hash);\n      return multihash.code === expectedHashAlgorithmInMultihashCode;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Verifies the given content against the given multihash.\n   */\n  public static isValidHash(\n    encodedContent: string | undefined,\n    encodedMultihash: string\n  ): boolean {\n    if (encodedContent === undefined) {\n      return false;\n    }\n\n    try {\n      const contentBuffer = Encoder.decodeAsBuffer(encodedContent);\n      return Multihash.verify(contentBuffer, encodedMultihash);\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  }\n\n  /**\n   * Canonicalizes the given content object, then verifies the multihash against the canonicalized string as a UTF8 buffer.\n   */\n  public static canonicalizeAndVerify(\n    content: object | undefined,\n    encodedMultihash: string\n  ): boolean {\n    if (content === undefined) {\n      return false;\n    }\n\n    try {\n      const contentBuffer = JsonCanonicalizer.canonicalizeAsBuffer(content);\n\n      return Multihash.verify(contentBuffer, encodedMultihash);\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  }\n\n  /**\n   * Verifies the multihash against the content `Buffer`.\n   */\n  private static verify(content: Buffer, encodedMultihash: string): boolean {\n    try {\n      const multihashBuffer = Encoder.decodeAsBuffer(encodedMultihash);\n\n      const hashAlgorithmCode = Multihash.getHashAlgorithmCode(multihashBuffer);\n      const actualHashBuffer = Multihash.hash(content, hashAlgorithmCode);\n\n      if (Buffer.compare(actualHashBuffer, multihashBuffer) !== 0) {\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * ReadableStream utilities\n */\nexport default class ReadableStream {\n  /**\n   * Given a readable stream, reads all data until end or error\n   * @param stream Fetch readable stream to read\n   * @returns a Buffer of the readable stream data\n   */\n  public static async readAll(stream: NodeJS.ReadableStream): Promise<Buffer> {\n    // Set callback for the 'readable' event to concatenate chunks of the readable stream.\n    let content: Buffer = Buffer.alloc(0);\n\n    stream.on('readable', () => {\n      // NOTE: Cast to any is to work-around incorrect TS definition for read() where\n      // `null` should be a possible return type but is not defined in @types/node: 10.12.18.\n      let chunk = stream.read() as any;\n      while (chunk !== null) {\n        content = Buffer.concat([content, chunk]);\n        chunk = stream.read();\n      }\n    });\n\n    // Create a promise to wrap the successful/failed read events.\n    const readBody = new Promise((resolve, reject) => {\n      stream.on('end', resolve);\n      stream.on('error', reject);\n    });\n\n    // Wait until the read is completed.\n    await readBody;\n\n    return content;\n  }\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Class containing reusable sorted array operations.\n */\nexport default class SortedArray {\n  /**\n   * Performs binary search on an item against the given sorted array using the given compare function.\n   * @returns Returns the index of the item if found; `undefined` otherwise.\n   */\n  public static binarySearch<T1, T2>(\n    sortedArray: Array<T1>,\n    searchItem: T2,\n    compare: (item1: T1, item2: T2) => number\n  ): number | undefined {\n    let lowerBoundaryIndex = 0;\n    let upperBoundaryIndex = sortedArray.length - 1;\n    let middleIndex = 0;\n    while (lowerBoundaryIndex <= upperBoundaryIndex) {\n      middleIndex = Math.floor((lowerBoundaryIndex + upperBoundaryIndex) / 2);\n\n      const comparisonResult = compare(sortedArray[middleIndex], searchItem);\n      if (comparisonResult > 0) {\n        // If value pointed by middleIndex is greater than the searchItem:\n        upperBoundaryIndex = middleIndex - 1;\n      } else if (comparisonResult < 0) {\n        // If value pointed by middleIndex is smaller than the searchItem:\n        lowerBoundaryIndex = middleIndex + 1;\n      } else {\n        // Else we've found the item.\n        return middleIndex;\n      }\n    }\n\n    return undefined;\n  }\n}\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Error codes used by Sidetree core service.\n */\nexport default {\n  BlockchainGetFeeResponseNotOk: 'blockchain_get_fee_response_not_ok',\n  BlockchainGetLatestTimeResponseNotOk:\n    'blockchain_get_latest_time_response_not_ok',\n  BlockchainGetLockResponseNotOk: 'blockchain_get_lock_response_not_ok',\n  BlockchainGetWriterLockResponseNotOk:\n    'blockchain_get_writer_lock_response_not_ok',\n  BlockchainReadInvalidArguments: 'blockchain_read_invalid_arguments',\n  BlockchainReadResponseNotOk: 'blockchain_read_response_not_ok',\n  BlockchainWriteResponseNotOk: 'blockchain_write_response_not_ok',\n  VersionManagerBatchWriterNotFound: 'version_manager_batch_writer_not_found',\n  VersionManagerDocumentComposerNotFound:\n    'version_manager_document_composer_not_found',\n  VersionManagerOperationProcessorNotFound:\n    'version_manager_operation_processor_not_found',\n  VersionManagerRequestHandlerNotFound:\n    'version_manager_request_handler_not_found',\n  VersionManagerTransactionProcessorNotFound:\n    'version_manager_transaction_processor_not_found',\n  VersionManagerTransactionSelectorNotFound:\n    'version_manager_transaction_selector_not_found',\n  VersionManagerVersionStringNotFound:\n    'version_manager_version_string_not_found',\n  VersionManagerVersionMetadataIncorrectType:\n    'version_manager_version_metadata_incorrect_type',\n};\n","/*\n * The code in this file originated from\n * @see https://github.com/decentralized-identity/sidetree\n * For the list of changes that was made to the original code\n * @see https://github.com/transmute-industries/sidetree.js/blob/main/reference-implementation-changes.md\n *\n * Copyright 2020 - Transmute Industries Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Common error codes used across services.\n */\nexport default {\n  BlockchainTimeOutOfRange: 'blockchain_time_out_of_range',\n  InvalidTransactionNumberOrTimeHash: 'invalid_transaction_number_or_time_hash',\n  NotEnoughBalanceForWrite: 'not_enough_balace_for_write',\n  SpendingCapPerPeriodReached: 'spending_cap_per_period_reached',\n  ValueTimeLockNotFound: 'value_time_lock_not_found',\n};\n"],"names":["FetchResultCode","OperationType","PublicKeyPurpose","ResponseStatus","TransactionProcessingStatus","AnchoredDataIncorrectFormat","AnchoredDataNumberOfOperationsGreaterThanMax","AnchoredDataNumberOfOperationsNotPositiveInteger","AnchorFileCreatePropertyNotArray","AnchorFileDecompressionFailure","AnchorFileHasUnknownProperty","AnchorFileMapFileHashMissing","AnchorFileMapFileHashNotString","AnchorFileMapFileHashUnsupported","AnchorFileMissingOperationsProperty","AnchorFileMultipleOperationsForTheSameDid","AnchorFileNotJson","AnchorFileOperationCountExceededPaidLimit","AnchorFileRecoverPropertyNotArray","AnchorFileDeactivatePropertyNotArray","AnchorFileUnexpectedPropertyInOperations","AnchorFileWriterLockIPropertyNotString","BatchWriterAlreadyHasOperationForDid","CasFileHashNotValid","CasFileNotAFile","CasFileNotFound","CasFileTooLarge","CasNotReachable","ChunkFileDeltaSizeExceedsLimit","ChunkFileDeltasNotArrayOfStrings","ChunkFileDeltasPropertyNotArray","ChunkFileUnexpectedProperty","CreateOperationMissingOrUnknownProperty","CreateOperationSuffixDataMissingOrNotString","CreateOperationSuffixDataMissingOrUnknownProperty","CreateOperationTypeIncorrect","DeltaMissingOrNotString","DeltaMissingOrUnknownProperty","DidIncorrectPrefix","DidInitialStateValueContainsMoreThanOneDot","DidInitialStateValueContainsNoDot","DidInitialStateValueDoesNotContainTwoParts","DidInvalidDidString","DidLongFormNoInitialStateFound","DidLongFormOnlyInitialStateParameterIsAllowed","DidLongFormOnlyOneQueryParamAllowed","DidNoUniqueSuffix","DidUniqueSuffixFromInitialStateMismatch","DocumentComposerDocumentMissing","DocumentComposerIdNotString","DocumentComposerIdNotUsingBase64UrlCharacterSet","DocumentComposerIdTooLong","DocumentComposerInvalidSignature","DocumentComposerPatchMissingOrUnknownAction","DocumentComposerPatchMissingOrUnknownProperty","DocumentComposerPatchPublicKeyIdNotString","DocumentComposerPatchPublicKeyIdsNotArray","DocumentComposerPatchServiceEndpointNotString","DocumentComposerPatchServiceEndpointsNotArray","DocumentComposerPatchServiceTypeMissingOrUnknown","DocumentComposerPublicKeyIdDuplicated","DocumentComposerPublicKeyJwkMissingOrIncorrectType","DocumentComposerPublicKeyMissingOrUnknownProperty","DocumentComposerPublicKeysNotArray","DocumentComposerPublicKeyTypeMissingOrIncorrectType","DocumentComposerPublicKeyPurposeMissingOrUnknown","DocumentComposerPublicKeyPurposeExceedsMaxLength","DocumentComposerPublicKeyInvalidPurpose","DocumentComposerPatchServiceEndpointIdsNotArray","DocumentComposerPatchServiceEndpointServiceEndpointNotString","DocumentComposerPatchServiceEndpointServiceEndpointNotValidUrl","DocumentComposerPatchServiceEndpointServiceEndpointTooLong","DocumentComposerPatchServiceEndpointTypeNotString","DocumentComposerPatchServiceEndpointTypeTooLong","DocumentComposerServiceEndpointMissingOrUnknownProperty","DocumentComposerServiceNotArray","DocumentComposerUnknownPropertyInDocument","DocumentComposerUpdateOperationDocumentPatchesNotArray","DocumentIncorretEncodedFormat","DocumentNotJson","DocumentNotValidOriginalDocument","EncoderValidateBase64UrlStringInputNotBase64UrlString","EncoderValidateBase64UrlStringInputNotString","JwkHasUnknownProperty","JwkMissingOrInvalidCrv","JwkMissingOrInvalidKty","JwkMissingOrInvalidTypeX","JwkMissingOrInvalidTypeY","JwkUndefined","JwsCompactJwsInvalid","JwsCompactJwsNotString","JwsFailedSignatureValidation","JwsPayloadNotBase64UrlString","JwsProtectedHeaderMissingOrIncorrectAlg","JwsProtectedHeaderMissingOrUnknownProperty","JwsSignatureNotBase64UrlString","MapFileChunkHasMissingOrUnknownProperty","MapFileChunksPropertyDoesNotHaveExactlyOneElement","MapFileChunksPropertyMissingOrIncorrectType","MapFileDecompressionFailure","MapFileHasUnknownProperty","MapFileMultipleOperationsForTheSameDid","MapFileNotJson","MapFileOperationsPropertyHasMissingOrUnknownProperty","MapFileUpdateOperationsNotArray","MultihashNotLatestSupportedHashAlgorithm","MultihashUnsupportedHashAlgorithm","OperationCreateInvalidDidDocument","OperationCountLessThanZero","OperationCreatePayloadHasMissingOrInvalidNextRecoveryCommitment","OperationCreatePayloadHasMissingOrInvalidNextUpdateCommitment","OperationCreatePayloadMissingOrUnknownProperty","OperationDocumentPatchesMissing","OperationPayloadMissingOrIncorrectType","OperationProcessorCreateOperationDoesNotHaveRevealValue","OperationProcessorUnknownOperationType","OperationTypeUnknownOrMissing","QueueingMultipleOperationsPerDidNotAllowed","RecoverOperationMissingOrInvalidDidUniqueSuffix","RecoverOperationMissingOrUnknownProperty","RecoverOperationSignedDataMissingOrUnknownProperty","RecoverOperationTypeIncorrect","RequestHandlerDeltaExceedsMaximumSize","RequestHandlerUnknownOperationType","DeactivateOperationMissingOrInvalidDidUniqueSuffix","DeactivateOperationMissingOrUnknownProperty","DeactivateOperationSignedDataMissingOrUnknownProperty","DeactivateOperationSignedDidUniqueSuffixMismatch","DeactivateOperationTypeIncorrect","TransactionFeePaidInvalid","TransactionFeePaidLessThanNormalizedFee","TransactionProcessorPaidOperationCountExceedsLimit","TransactionsNotInSameBlock","UpdateOperationMissingDidUniqueSuffix","UpdateOperationMissingOrUnknownProperty","UpdateOperationSignedDataHasMissingOrUnknownProperty","UpdateOperationTypeIncorrect","ValueTimeLockVerifierInvalidNumberOfOperations","ValueTimeLockVerifierTransactionTimeOutsideLockRange","ValueTimeLockVerifierTransactionWriterLockOwnerMismatch","SidetreeError","code","message","Object","setPrototypeOf","prototype","createFromError","err","undefined","stringify","error","JSON","getOwnPropertyNames","Error","protocolParameters","hashAlgorithmInMultihashCode","maxAnchorFileSizeInBytes","maxChunkFileSizeInBytes","maxDeltaSizeInBytes","maxMapFileSizeInBytes","maxNumberOfOperationsPerTransactionTime","maxNumberOfTransactionsPerTransactionTime","maxNumberOfOperationsForNoValueTimeLock","maxOperationsPerBatch","normalizedFeeToPerOperationFeeMultiplier","valueTimeLockAmountMultiplier","AnchoredDataSerializer","serialize","dataToBeAnchored","numberOfOperations","delimiter","anchorFileHash","deserialize","serializedData","splitData","split","length","ErrorCode","parsePositiveInteger","input","test","Number","Encoder","encode","content","base64url","decodeAsBuffer","encodedContent","validateBase64UrlString","toBuffer","decodeAsString","decodeBase64UrlAsString","decode","isBase64UrlString","canonicalize","require","JsonCanonicalizer","canonicalizeAsBuffer","canonicalizedString","Buffer","from","multihashes","Multihash","hash","ProtocolParameters","crypto","update","digest","codes","canonicalizeThenHashThenEncode","contentBuffer","hashThenEncode","multihashBuffer","getHashAlgorithmCode","multihash","verifyHashComputedUsingLatestSupportedAlgorithm","isComputedUsingHashAlgorithm","expectedHashAlgorithmInMultihashCode","isValidHash","encodedMultihash","verify","console","log","canonicalizeAndVerify","hashAlgorithmCode","actualHashBuffer","compare","runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","method","arg","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","doneResult","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","ReadableStream","readAll","stream","alloc","on","chunk","read","concat","readBody","SortedArray","binarySearch","sortedArray","searchItem","lowerBoundaryIndex","upperBoundaryIndex","middleIndex","comparisonResult","Math","floor","BlockchainGetFeeResponseNotOk","BlockchainGetLatestTimeResponseNotOk","BlockchainGetLockResponseNotOk","BlockchainGetWriterLockResponseNotOk","BlockchainReadInvalidArguments","BlockchainReadResponseNotOk","BlockchainWriteResponseNotOk","VersionManagerBatchWriterNotFound","VersionManagerDocumentComposerNotFound","VersionManagerOperationProcessorNotFound","VersionManagerRequestHandlerNotFound","VersionManagerTransactionProcessorNotFound","VersionManagerTransactionSelectorNotFound","VersionManagerVersionStringNotFound","VersionManagerVersionMetadataIncorrectType","BlockchainTimeOutOfRange","InvalidTransactionNumberOrTimeHash","NotEnoughBalanceForWrite","SpendingCapPerPeriodReached","ValueTimeLockNotFound"],"mappings":"0EAsBKA,iGAAL,SAAKA,GACHA,sCACAA,qCACAA,yDACAA,uDACAA,gCACAA,+BACAA,oBAPF,CAAKA,IAAAA,OAUL,ICVKC,IDUUD,GCVf,SAAKC,GACHA,kBACAA,kBACAA,0BACAA,oBAJF,CAAKA,IAAAA,OAOL,ICPKC,IDOUD,GCPf,SAAKC,GACHA,cACAA,oBACAA,2BACAA,8BACAA,oCACAA,oCANF,CAAKA,IAAAA,OASL,ICTKC,IDSUD,GCTf,SAAKC,GACHA,2BACAA,uBACAA,6BACAA,wBAJF,CAAKA,IAAAA,OAOL,ICPKC,IDOUD,GCPf,SAAKC,GACHA,oBACAA,wBAFF,CAAKA,IAAAA,OAKL,MAAeA,ICLA,CACbC,4BAA6B,iCAC7BC,6CACE,sDACFC,iDACE,0DACFC,iCAAkC,wCAClCC,+BAAgC,mCAChCC,6BAA8B,mCAC9BC,6BAA8B,oCAC9BC,+BAAgC,uCAChCC,iCAAkC,wCAClCC,oCACE,0CACFC,0CACE,mDACFC,kBAAmB,uBACnBC,0CACE,kDACFC,kCAAmC,yCACnCC,qCACE,4CACFC,yCACE,gDACFC,uCACE,iDACFC,qCACE,6CACFC,oBAAqB,0BACrBC,gBAAiB,sBACjBC,gBAAiB,qBACjBC,gBAAiB,qBACjBC,gBAAiB,oBACjBC,+BAAgC,sCAChCC,iCAAkC,wCAClCC,gCAAiC,uCACjCC,4BAA6B,iCAC7BC,wCACE,+CACFC,4CACE,qDACFC,kDACE,2DACFC,6BAA8B,kCAC9BC,wBAAyB,+BACzBC,8BAA+B,oCAC/BC,mBAAoB,uBACpBC,2CACE,qDACFC,kCAAmC,0CACnCC,2CACE,qDACFC,oBAAqB,yBACrBC,+BAAgC,uCAChCC,8CACE,yDACFC,oCACE,6CACFC,kBAAmB,uBACnBC,wCACE,gDACFC,gCAAiC,qCACjCC,4BAA6B,kCAC7BC,gDACE,2DACFC,0BAA2B,gCAC3BC,iCAAkC,sCAClCC,4CACE,oDACFC,8CACE,sDACFC,0CACE,mDACFC,0CACE,oDACFC,8CACE,sDACFC,8CACE,sDACFC,iDACE,0DACFC,sCACE,6CACFC,mDACE,6DACFC,kDACE,2DACFC,mCAAoC,0CACpCC,oDACE,8DACFC,iDACE,0DACFC,iDACE,0DACFC,wCACE,+CACFC,gDACE,mDACFC,6DACE,iEACFC,+DACE,oEACFC,2DACE,+DACFC,kDACE,qDACFC,gDACE,mDACFC,wDACE,iEACFC,gCAAiC,sCACjCC,0CACE,iDACFC,uDACE,8DACFC,8BAA+B,oCAC/BC,gBAAiB,oBACjBC,iCAAkC,uCAClCC,sDACE,+DACFC,6CACE,qDACFC,sBAAuB,2BACvBC,uBAAwB,6BACxBC,uBAAwB,6BACxBC,yBAA0B,gCAC1BC,yBAA0B,gCAC1BC,aAAc,gBACdC,qBAAsB,0BACtBC,uBAAwB,6BACxBC,6BAA8B,kCAC9BC,6BAA8B,mCAC9BC,wCACE,gDACFC,2CACE,mDACFC,+BAAgC,qCAChCC,wCACE,iDACFC,kDACE,6DACFC,4CACE,qDACFC,4BAA6B,iCAC7BC,0BAA2B,gCAC3BC,uCACE,gDACFC,eAAgB,oBAChBC,qDACE,+DACFC,gCAAiC,uCACjCC,yCACE,gDACFC,kCAAmC,uCACnCC,kCAAmC,wCACnCC,2BAA4B,iCAC5BC,gEACE,2EACFC,8DACE,yEACFC,+CACE,uDACFC,gCAAiC,qCACjCC,uCACE,8CACFC,wDACE,kEACFC,uCACE,6CACFC,8BAA+B,oCAC/BC,2CACE,mDACFC,gDACE,yDACFC,yCACE,gDACFC,mDACE,4DACFC,8BAA+B,mCAC/BC,sCACE,kDACFC,mCAAoC,yCACpCC,mDACE,4DACFC,4CACE,mDACFC,sDACE,+DACFC,iDACE,yDACFC,iCAAkC,sCAClCC,0BAA2B,kCAC3BC,wCACE,gDACFC,mDACE,2DACFC,2BAA4B,iCAC5BC,sCACE,6CACFC,wCACE,+CACFC,qDACE,+DACFC,6BAA8B,kCAC9BC,+CACE,uDACFC,qDACE,qEACFC,wDACE,+/CChNiBC,iCACAC,EAAcC,8BACzBA,EAAaD,OAASC,EAAYD,eADvBA,EAKjBE,OAAOC,wLAAgCC,sGAS3BC,gBAAP,SAAuBL,EAAcM,UACnC,IAAIP,EAAcC,EAAMM,EAAMA,EAAIL,aAAUM,MAMvCC,UAAP,SAAiBC,UACfC,KAAKF,UAAUC,EAAOP,OAAOS,oBAAoBF,UAvBjBG,QCCrCC,EAAyC,CAC7CC,6BAA8B,GAC9BC,yBAA0B,IAC1BC,wBAAyB,IACzBC,oBAAqB,IACrBC,sBAAuB,IACvBC,wCAAyC,IACzCC,0CAA2C,IAG3CC,wCAAyC,IACzCC,sBAAuB,IACvBC,yCAA0C,IAC1CC,8BAA+B,KCVZC,oCASLC,UAAP,SAAiBC,YAEEA,EAAiBC,mBAAqBH,EAAuBI,UAAYF,EAAiBG,kBAStGC,YAAP,SAAmBC,OAClBC,EAAYD,EAAeE,MAAMT,EAAuBI,cAErC,IAArBI,EAAUE,aACN,IAAIpC,EACRqC,EAAU5K,+DACyBwK,OAIjCJ,EAAqBH,EAAuBY,qBAChDJ,EAAU,OAGRL,EAAqBf,EAAmBS,4BACpC,IAAIvB,EACRqC,EAAU3K,qEACcmK,oCAAoDf,EAAmBS,6BAI5F,CACLQ,eAAgBG,EAAU,GAC1BL,mBAAoBA,MAITS,qBAAP,SAA4BC,OAOR,aAAaC,KAAKD,SAGpC,IAAIvC,EACRqC,EAAU1K,0EACe4K,+DAItBE,OAAOF,SA7DOb,YAAY,UCFhBgB,oCAILC,OAAP,SAAcC,UACIC,EAAUF,OAAOC,MAO5BE,eAAP,SAAsBC,UAC3BL,EAAQM,wBAAwBD,GAEhBF,EAAUI,SAASF,MAOvBG,eAAP,SAAsBH,UACpBL,EAAQS,wBAAwBJ,MAM3BI,wBAAP,SAA+BZ,UACpCG,EAAQM,wBAAwBT,GAEhBM,EAAUO,OAAOb,MAUpBS,wBAAP,SAA+BT,MAChB,iBAAVA,QACH,IAAIvC,EACRqC,EAAU/F,uDACAiG,yBAIYG,EAAQW,kBAAkBd,SAE5C,IAAIvC,EACRqC,EAAUhG,gEACAkG,kCAQFc,kBAAP,SAAyBd,SAMJ,mBAAmBC,KAAKD,SC5EhDe,EAAeC,QAAQ,gBAKRC,oCAILC,qBAAP,SAA4Bb,OAC3Bc,EAA8BJ,EAAaV,UAC3Be,OAAOC,KAAKF,SCJhCG,EAAcN,QAAQ,eAKPO,oCAKLC,KAAP,SACLnB,EACA7B,OAOIgD,cALiCvD,IAAjCO,IACFA,EACEiD,EAAmBjD,8BAIfA,QACD,GACHgD,EAAOE,aACO,UACXC,OAAOtB,GACPuB,6BAGG,IAAInE,EAAcqC,EAAUvE,0CAIpB+F,EAAYlB,OAAOoB,EADXF,EAAYO,MAAMrD,OAUhCsD,+BAAP,SAAsCzB,OACrC0B,EAAgBd,EAAkBC,qBAAqBb,UAC9BkB,EAAUS,eACvCD,EACAN,EAAmBjD,iCASTwD,eAAP,SACL3B,EACA7B,OAEMyD,EAAkBV,EAAUC,KAChCnB,EACA7B,UAE6B2B,EAAQC,OAAO6B,MAQlCC,qBAAP,SAA4BD,OAC3BE,EAAYb,EAAYT,OAAOoB,MAGd,KAAnBE,EAAUzE,WACN,IAAID,EAAcqC,EAAUvE,0CAG7B4G,EAAUzE,QAOL0E,gDAAP,SAAuDZ,OAExBD,EAAUc,6BAC5Cb,EAFuC,UAOjC,IAAI/D,EACRqC,EAAUxE,6CAQF+G,6BAAP,SACLb,EACAc,cAGoBhB,EAAYT,OAAOW,GACpB9D,OAAS4E,EAC1B,gBACO,MAOGC,YAAP,SACL/B,EACAgC,WAEuBvE,IAAnBuC,SACK,UAIDuB,EAAgB5B,EAAQI,eAAeC,UACtCe,EAAUkB,OAAOV,EAAeS,GACvC,MAAOrE,UACPuE,QAAQC,IAAIxE,IACL,MAOGyE,sBAAP,SACLvC,EACAmC,WAEgBvE,IAAZoC,SACK,UAID0B,EAAgBd,EAAkBC,qBAAqBb,UAEtDkB,EAAUkB,OAAOV,EAAeS,GACvC,MAAOrE,UACPuE,QAAQC,IAAIxE,IACL,MAOIsE,OAAP,SAAcpC,EAAiBmC,WAE7BP,EAAkB9B,EAAQI,eAAeiC,GAEzCK,EAAoBtB,EAAUW,qBAAqBD,GACnDa,EAAmBvB,EAAUC,KAAKnB,EAASwC,UAES,IAAtDzB,OAAO2B,QAAQD,EAAkBb,GAKrC,MAAO9D,UACPuE,QAAQC,IAAIxE,IACL,wBC/Lb,IAAI6E,EAAW,SAAUC,GAGvB,IAAIC,EAAKtF,OAAOE,UACZqF,EAASD,EAAGE,eAEZC,EAA4B,mBAAXC,OAAwBA,OAAS,GAClDC,EAAiBF,EAAQG,UAAY,aACrCC,EAAsBJ,EAAQK,eAAiB,kBAC/CC,EAAoBN,EAAQO,aAAe,gBAE/C,SAASC,EAAOC,EAAKC,EAAKC,GAOxB,OANApG,OAAOqG,eAAeH,EAAKC,EAAK,CAC9BC,MAAOA,EACPE,YAAY,EACZC,cAAc,EACdC,UAAU,IAELN,EAAIC,GAEb,IAEEF,EAAO,GAAI,IACX,MAAO7F,GACP6F,EAAS,SAASC,EAAKC,EAAKC,GAC1B,OAAOF,EAAIC,GAAOC,GAItB,SAASK,EAAKC,EAASC,EAASC,EAAMC,GAEpC,IACIC,EAAY9G,OAAO+G,QADFJ,GAAWA,EAAQzG,qBAAqB8G,EAAYL,EAAUK,GACtC9G,WACzC+G,EAAU,IAAIC,EAAQL,GAAe,IAMzC,OAFAC,EAAUK,QAsMZ,SAA0BT,EAASE,EAAMK,GACvC,IAAIG,EA/KuB,iBAiL3B,OAAO,SAAgBC,EAAQC,GAC7B,GAhLoB,cAgLhBF,EACF,MAAM,IAAI1G,MAAM,gCAGlB,GAnLoB,cAmLhB0G,EAA6B,CAC/B,GAAe,UAAXC,EACF,MAAMC,EAKR,MAoQG,CAAElB,WAzfP/F,EAyfyBkH,MAAM,GA9P/B,IAHAN,EAAQI,OAASA,EACjBJ,EAAQK,IAAMA,IAED,CACX,IAAIE,EAAWP,EAAQO,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUP,GACnD,GAAIQ,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBR,EAAQI,OAGVJ,EAAQW,KAAOX,EAAQY,MAAQZ,EAAQK,SAElC,GAAuB,UAAnBL,EAAQI,OAAoB,CACrC,GAnNqB,mBAmNjBD,EAEF,MADAA,EAjNc,YAkNRH,EAAQK,IAGhBL,EAAQa,kBAAkBb,EAAQK,SAEN,WAAnBL,EAAQI,QACjBJ,EAAQc,OAAO,SAAUd,EAAQK,KAGnCF,EA5NkB,YA8NlB,IAAIY,EAASC,EAASvB,EAASE,EAAMK,GACrC,GAAoB,WAAhBe,EAAOE,KAAmB,CAO5B,GAJAd,EAAQH,EAAQM,KAjOA,YAFK,iBAuOjBS,EAAOV,MAAQK,EACjB,SAGF,MAAO,CACLvB,MAAO4B,EAAOV,IACdC,KAAMN,EAAQM,MAGS,UAAhBS,EAAOE,OAChBd,EA/OgB,YAkPhBH,EAAQI,OAAS,QACjBJ,EAAQK,IAAMU,EAAOV,OA9QPa,CAAiBzB,EAASE,EAAMK,GAE7CH,EAcT,SAASmB,EAASG,EAAIlC,EAAKoB,GACzB,IACE,MAAO,CAAEY,KAAM,SAAUZ,IAAKc,EAAGC,KAAKnC,EAAKoB,IAC3C,MAAOlH,GACP,MAAO,CAAE8H,KAAM,QAASZ,IAAKlH,IAhBjCiF,EAAQoB,KAAOA,EAoBf,IAOIkB,EAAmB,GAMvB,SAASX,KACT,SAASsB,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkB7C,GAAkB,WAClC,OAAO8C,MAGT,IAAIC,EAAW1I,OAAO2I,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4BtD,GAC5BC,EAAO8C,KAAKO,EAAyBjD,KAGvC6C,EAAoBI,GAGtB,IAAIE,EAAKP,EAA2BrI,UAClC8G,EAAU9G,UAAYF,OAAO+G,OAAOyB,GAWtC,SAASO,EAAsB7I,GAC7B,CAAC,OAAQ,QAAS,UAAU8I,SAAQ,SAAS3B,GAC3CpB,EAAO/F,EAAWmH,GAAQ,SAASC,GACjC,OAAOmB,KAAKtB,QAAQE,EAAQC,SAkClC,SAAS2B,EAAcnC,EAAWoC,GAgChC,IAAIC,EAgCJV,KAAKtB,QA9BL,SAAiBE,EAAQC,GACvB,SAAS8B,IACP,OAAO,IAAIF,GAAY,SAASG,EAASC,IAnC7C,SAASC,EAAOlC,EAAQC,EAAK+B,EAASC,GACpC,IAAItB,EAASC,EAASnB,EAAUO,GAASP,EAAWQ,GACpD,GAAoB,UAAhBU,EAAOE,KAEJ,CACL,IAAIsB,EAASxB,EAAOV,IAChBlB,EAAQoD,EAAOpD,MACnB,OAAIA,GACiB,iBAAVA,GACPb,EAAO8C,KAAKjC,EAAO,WACd8C,EAAYG,QAAQjD,EAAMqD,SAASC,MAAK,SAAStD,GACtDmD,EAAO,OAAQnD,EAAOiD,EAASC,MAC9B,SAASlJ,GACVmJ,EAAO,QAASnJ,EAAKiJ,EAASC,MAI3BJ,EAAYG,QAAQjD,GAAOsD,MAAK,SAASC,GAI9CH,EAAOpD,MAAQuD,EACfN,EAAQG,MACP,SAASjJ,GAGV,OAAOgJ,EAAO,QAAShJ,EAAO8I,EAASC,MAvBzCA,EAAOtB,EAAOV,KAiCZiC,CAAOlC,EAAQC,EAAK+B,EAASC,MAIjC,OAAOH,EAaLA,EAAkBA,EAAgBO,KAChCN,EAGAA,GACEA,KAkHV,SAAS1B,EAAoBF,EAAUP,GACrC,IAAII,EAASG,EAAS5B,SAASqB,EAAQI,QACvC,QA1TEhH,IA0TEgH,EAAsB,CAKxB,GAFAJ,EAAQO,SAAW,KAEI,UAAnBP,EAAQI,OAAoB,CAE9B,GAAIG,EAAS5B,SAAiB,SAG5BqB,EAAQI,OAAS,SACjBJ,EAAQK,SArUZjH,EAsUIqH,EAAoBF,EAAUP,GAEP,UAAnBA,EAAQI,QAGV,OAAOM,EAIXV,EAAQI,OAAS,QACjBJ,EAAQK,IAAM,IAAIsC,UAChB,kDAGJ,OAAOjC,EAGT,IAAIK,EAASC,EAASZ,EAAQG,EAAS5B,SAAUqB,EAAQK,KAEzD,GAAoB,UAAhBU,EAAOE,KAIT,OAHAjB,EAAQI,OAAS,QACjBJ,EAAQK,IAAMU,EAAOV,IACrBL,EAAQO,SAAW,KACZG,EAGT,IAAIkC,EAAO7B,EAAOV,IAElB,OAAMuC,EAOFA,EAAKtC,MAGPN,EAAQO,EAASsC,YAAcD,EAAKzD,MAGpCa,EAAQ8C,KAAOvC,EAASwC,QAQD,WAAnB/C,EAAQI,SACVJ,EAAQI,OAAS,OACjBJ,EAAQK,SAzXVjH,GAmYF4G,EAAQO,SAAW,KACZG,GANEkC,GA3BP5C,EAAQI,OAAS,QACjBJ,EAAQK,IAAM,IAAIsC,UAAU,oCAC5B3C,EAAQO,SAAW,KACZG,GAoDX,SAASsC,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBzB,KAAK+B,WAAWC,KAAKN,GAGvB,SAASO,EAAcP,GACrB,IAAInC,EAASmC,EAAMQ,YAAc,GACjC3C,EAAOE,KAAO,gBACPF,EAAOV,IACd6C,EAAMQ,WAAa3C,EAGrB,SAASd,EAAQL,GAIf4B,KAAK+B,WAAa,CAAC,CAAEJ,OAAQ,SAC7BvD,EAAYmC,QAAQiB,EAAcxB,MAClCA,KAAKmC,OAAM,GA8Bb,SAAS/B,EAAOgC,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAASlF,GAC9B,GAAImF,EACF,OAAOA,EAAezC,KAAKwC,GAG7B,GAA6B,mBAAlBA,EAASd,KAClB,OAAOc,EAGT,IAAKE,MAAMF,EAAS5I,QAAS,CAC3B,IAAI+I,GAAK,EAAGjB,EAAO,SAASA,IAC1B,OAASiB,EAAIH,EAAS5I,QACpB,GAAIsD,EAAO8C,KAAKwC,EAAUG,GAGxB,OAFAjB,EAAK3D,MAAQyE,EAASG,GACtBjB,EAAKxC,MAAO,EACLwC,EAOX,OAHAA,EAAK3D,WAzeT/F,EA0eI0J,EAAKxC,MAAO,EAELwC,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMkB,GAIjB,SAASA,IACP,MAAO,CAAE7E,WAzfP/F,EAyfyBkH,MAAM,GA+MnC,OA5mBAe,EAAkBpI,UAAY4I,EAAGoC,YAAc3C,EAC/CA,EAA2B2C,YAAc5C,EACzCA,EAAkB6C,YAAclF,EAC9BsC,EACAxC,EACA,qBAaFV,EAAQ+F,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAOH,YAClD,QAAOI,IACHA,IAAShD,GAG2B,uBAAnCgD,EAAKH,aAAeG,EAAKC,QAIhClG,EAAQmG,KAAO,SAASH,GAQtB,OAPIrL,OAAOC,eACTD,OAAOC,eAAeoL,EAAQ9C,IAE9B8C,EAAOI,UAAYlD,EACnBtC,EAAOoF,EAAQtF,EAAmB,sBAEpCsF,EAAOnL,UAAYF,OAAO+G,OAAO+B,GAC1BuC,GAOThG,EAAQqG,MAAQ,SAASpE,GACvB,MAAO,CAAEmC,QAASnC,IAsEpByB,EAAsBE,EAAc/I,WACpC+I,EAAc/I,UAAU2F,GAAuB,WAC7C,OAAO4C,MAETpD,EAAQ4D,cAAgBA,EAKxB5D,EAAQsG,MAAQ,SAASjF,EAASC,EAASC,EAAMC,EAAaqC,QACxC,IAAhBA,IAAwBA,EAAc0C,SAE1C,IAAIC,EAAO,IAAI5C,EACbxC,EAAKC,EAASC,EAASC,EAAMC,GAC7BqC,GAGF,OAAO7D,EAAQ+F,oBAAoBzE,GAC/BkF,EACAA,EAAK9B,OAAOL,MAAK,SAASF,GACxB,OAAOA,EAAOjC,KAAOiC,EAAOpD,MAAQyF,EAAK9B,WAuKjDhB,EAAsBD,GAEtB7C,EAAO6C,EAAI/C,EAAmB,aAO9B+C,EAAGnD,GAAkB,WACnB,OAAO8C,MAGTK,EAAGgD,SAAW,WACZ,MAAO,sBAkCTzG,EAAQ0G,KAAO,SAASC,GACtB,IAAID,EAAO,GACX,IAAK,IAAI5F,KAAO6F,EACdD,EAAKtB,KAAKtE,GAMZ,OAJA4F,EAAKE,UAIE,SAASlC,IACd,KAAOgC,EAAK9J,QAAQ,CAClB,IAAIkE,EAAM4F,EAAKG,MACf,GAAI/F,KAAO6F,EAGT,OAFAjC,EAAK3D,MAAQD,EACb4D,EAAKxC,MAAO,EACLwC,EAQX,OADAA,EAAKxC,MAAO,EACLwC,IAsCX1E,EAAQwD,OAASA,EAMjB3B,EAAQhH,UAAY,CAClBgL,YAAahE,EAEb0D,MAAO,SAASuB,GAcd,GAbA1D,KAAK2D,KAAO,EACZ3D,KAAKsB,KAAO,EAGZtB,KAAKb,KAAOa,KAAKZ,WApgBjBxH,EAqgBAoI,KAAKlB,MAAO,EACZkB,KAAKjB,SAAW,KAEhBiB,KAAKpB,OAAS,OACdoB,KAAKnB,SAzgBLjH,EA2gBAoI,KAAK+B,WAAWxB,QAAQ0B,IAEnByB,EACH,IAAK,IAAIZ,KAAQ9C,KAEQ,MAAnB8C,EAAKc,OAAO,IACZ9G,EAAO8C,KAAKI,KAAM8C,KACjBR,OAAOQ,EAAKe,MAAM,MACrB7D,KAAK8C,QAnhBXlL,IAyhBFkM,KAAM,WACJ9D,KAAKlB,MAAO,EAEZ,IACIiF,EADY/D,KAAK+B,WAAW,GACLG,WAC3B,GAAwB,UAApB6B,EAAWtE,KACb,MAAMsE,EAAWlF,IAGnB,OAAOmB,KAAKgE,MAGd3E,kBAAmB,SAAS4E,GAC1B,GAAIjE,KAAKlB,KACP,MAAMmF,EAGR,IAAIzF,EAAUwB,KACd,SAASkE,EAAOC,EAAKC,GAYnB,OAXA7E,EAAOE,KAAO,QACdF,EAAOV,IAAMoF,EACbzF,EAAQ8C,KAAO6C,EAEXC,IAGF5F,EAAQI,OAAS,OACjBJ,EAAQK,SApjBZjH,KAujBYwM,EAGZ,IAAK,IAAI7B,EAAIvC,KAAK+B,WAAWvI,OAAS,EAAG+I,GAAK,IAAKA,EAAG,CACpD,IAAIb,EAAQ1B,KAAK+B,WAAWQ,GACxBhD,EAASmC,EAAMQ,WAEnB,GAAqB,SAAjBR,EAAMC,OAIR,OAAOuC,EAAO,OAGhB,GAAIxC,EAAMC,QAAU3B,KAAK2D,KAAM,CAC7B,IAAIU,EAAWvH,EAAO8C,KAAK8B,EAAO,YAC9B4C,EAAaxH,EAAO8C,KAAK8B,EAAO,cAEpC,GAAI2C,GAAYC,EAAY,CAC1B,GAAItE,KAAK2D,KAAOjC,EAAME,SACpB,OAAOsC,EAAOxC,EAAME,UAAU,GACzB,GAAI5B,KAAK2D,KAAOjC,EAAMG,WAC3B,OAAOqC,EAAOxC,EAAMG,iBAGjB,GAAIwC,GACT,GAAIrE,KAAK2D,KAAOjC,EAAME,SACpB,OAAOsC,EAAOxC,EAAME,UAAU,OAG3B,CAAA,IAAI0C,EAMT,MAAM,IAAIrM,MAAM,0CALhB,GAAI+H,KAAK2D,KAAOjC,EAAMG,WACpB,OAAOqC,EAAOxC,EAAMG,gBAU9BvC,OAAQ,SAASG,EAAMZ,GACrB,IAAK,IAAI0D,EAAIvC,KAAK+B,WAAWvI,OAAS,EAAG+I,GAAK,IAAKA,EAAG,CACpD,IAAIb,EAAQ1B,KAAK+B,WAAWQ,GAC5B,GAAIb,EAAMC,QAAU3B,KAAK2D,MACrB7G,EAAO8C,KAAK8B,EAAO,eACnB1B,KAAK2D,KAAOjC,EAAMG,WAAY,CAChC,IAAI0C,EAAe7C,EACnB,OAIA6C,IACU,UAAT9E,GACS,aAATA,IACD8E,EAAa5C,QAAU9C,GACvBA,GAAO0F,EAAa1C,aAGtB0C,EAAe,MAGjB,IAAIhF,EAASgF,EAAeA,EAAarC,WAAa,GAItD,OAHA3C,EAAOE,KAAOA,EACdF,EAAOV,IAAMA,EAET0F,GACFvE,KAAKpB,OAAS,OACdoB,KAAKsB,KAAOiD,EAAa1C,WAClB3C,GAGFc,KAAKwE,SAASjF,IAGvBiF,SAAU,SAASjF,EAAQuC,GACzB,GAAoB,UAAhBvC,EAAOE,KACT,MAAMF,EAAOV,IAcf,MAXoB,UAAhBU,EAAOE,MACS,aAAhBF,EAAOE,KACTO,KAAKsB,KAAO/B,EAAOV,IACM,WAAhBU,EAAOE,MAChBO,KAAKgE,KAAOhE,KAAKnB,IAAMU,EAAOV,IAC9BmB,KAAKpB,OAAS,SACdoB,KAAKsB,KAAO,OACa,WAAhB/B,EAAOE,MAAqBqC,IACrC9B,KAAKsB,KAAOQ,GAGP5C,GAGTuF,OAAQ,SAAS5C,GACf,IAAK,IAAIU,EAAIvC,KAAK+B,WAAWvI,OAAS,EAAG+I,GAAK,IAAKA,EAAG,CACpD,IAAIb,EAAQ1B,KAAK+B,WAAWQ,GAC5B,GAAIb,EAAMG,aAAeA,EAGvB,OAFA7B,KAAKwE,SAAS9C,EAAMQ,WAAYR,EAAMI,UACtCG,EAAcP,GACPxC,IAKbwF,MAAS,SAAS/C,GAChB,IAAK,IAAIY,EAAIvC,KAAK+B,WAAWvI,OAAS,EAAG+I,GAAK,IAAKA,EAAG,CACpD,IAAIb,EAAQ1B,KAAK+B,WAAWQ,GAC5B,GAAIb,EAAMC,SAAWA,EAAQ,CAC3B,IAAIpC,EAASmC,EAAMQ,WACnB,GAAoB,UAAhB3C,EAAOE,KAAkB,CAC3B,IAAIkF,EAASpF,EAAOV,IACpBoD,EAAcP,GAEhB,OAAOiD,GAMX,MAAM,IAAI1M,MAAM,0BAGlB2M,cAAe,SAASxC,EAAUf,EAAYE,GAa5C,OAZAvB,KAAKjB,SAAW,CACd5B,SAAUiD,EAAOgC,GACjBf,WAAYA,EACZE,QAASA,GAGS,SAAhBvB,KAAKpB,SAGPoB,KAAKnB,SA7rBPjH,GAgsBOsH,IAQJtC,GAOsBiI,EAAOjI,SAGtC,IACEkI,mBAAqBnI,EACrB,MAAOoI,GAUPC,SAAS,IAAK,yBAAdA,CAAwCrI,gCCptBrBsI,oCAMCC,mCAAb,WAAqBC,iFAEtBnL,EAAkBe,OAAOqK,MAAM,GAEnCD,EAAOE,GAAG,YAAY,mBAGhBC,EAAQH,EAAOI,OACF,OAAVD,GACLtL,EAAUe,OAAOyK,OAAO,CAACxL,EAASsL,IAClCA,EAAQH,EAAOI,UAKbE,EAAW,IAAItC,SAAQ,SAACvC,EAASC,GACrCsE,EAAOE,GAAG,MAAOzE,GACjBuE,EAAOE,GAAG,QAASxE,eAIf4E,kCAECzL,yGC7BU0L,oCAKLC,aAAP,SACLC,EACAC,EACAnJ,WAEIoJ,EAAqB,EACrBC,EAAqBH,EAAYpM,OAAS,EAC1CwM,EAAc,EACXF,GAAsBC,GAAoB,KAGzCE,EAAmBvJ,EAAQkJ,EAFjCI,EAAcE,KAAKC,OAAOL,EAAqBC,GAAsB,IAEVF,MACvDI,EAAmB,EAErBF,EAAqBC,EAAc,MAC9B,CAAA,KAAIC,EAAmB,UAKrBD,EAHPF,EAAqBE,EAAc,8GCtB5B,CACbI,8BAA+B,qCAC/BC,qCACE,6CACFC,+BAAgC,sCAChCC,qCACE,6CACFC,+BAAgC,oCAChCC,4BAA6B,kCAC7BC,6BAA8B,mCAC9BC,kCAAmC,yCACnCC,uCACE,8CACFC,yCACE,gDACFC,qCACE,4CACFC,2CACE,kDACFC,0CACE,iDACFC,oCACE,2CACFC,2CACE,gSCxBW,CACbC,yBAA0B,+BAC1BC,mCAAoC,0CACpCC,yBAA0B,8BAC1BC,4BAA6B,kCAC7BC,sBAAuB"}